{"ast":null,"code":"import { auth, createUserProfileDocument } from '../../api/firebase/firebase';\nimport * as actionTypes from './actionTypes'; ////////////////////\n\nexport const setCurrentUserNull = userCredentials => ({\n  type: actionTypes.SET_CURRENT_USER_NULL,\n  payload: userCredentials\n});\nexport const setCurrentUserSuccess = userCredentials => ({\n  type: actionTypes.SET_CURRENT_USER_SUCCESS,\n  payload: userCredentials\n});\nexport const setCurrentUserFail = errorMessage => ({\n  type: actionTypes.SET_CURRENT_USER_FAIL,\n  payload: errorMessage\n});\nexport const setCurrentUserAsync = () => async dispatch => {\n  await auth.onAuthStateChanged(async userCredentials => {\n    if (userCredentials) {\n      const userRef = await createUserProfileDocument(userCredentials);\n      userRef.onSnapshot(snapShot => {\n        const userCredentials = {\n          id: snapShot.id,\n          ...snapShot.data()\n        };\n        dispatch(setCurrentUserSuccess(userCredentials));\n      });\n    }\n\n    dispatch(setCurrentUserNull(userCredentials));\n  });\n};","map":{"version":3,"sources":["/home/alin/alinSpinjitzu/udemy courses/8_Complete React Developer in 2020/25_react_e-store/client/src/redux/actions/userAction.js"],"names":["auth","createUserProfileDocument","actionTypes","setCurrentUserNull","userCredentials","type","SET_CURRENT_USER_NULL","payload","setCurrentUserSuccess","SET_CURRENT_USER_SUCCESS","setCurrentUserFail","errorMessage","SET_CURRENT_USER_FAIL","setCurrentUserAsync","dispatch","onAuthStateChanged","userRef","onSnapshot","snapShot","id","data"],"mappings":"AAAA,SAASA,IAAT,EAAeC,yBAAf,QAAgD,6BAAhD;AAEA,OAAO,KAAKC,WAAZ,MAA6B,eAA7B,C,CAEA;;AAEA,OAAO,MAAMC,kBAAkB,GAAIC,eAAD,KAAsB;AACtDC,EAAAA,IAAI,EAAEH,WAAW,CAACI,qBADoC;AAEtDC,EAAAA,OAAO,EAAEH;AAF6C,CAAtB,CAA3B;AAKP,OAAO,MAAMI,qBAAqB,GAAIJ,eAAD,KAAsB;AACzDC,EAAAA,IAAI,EAAEH,WAAW,CAACO,wBADuC;AAEzDF,EAAAA,OAAO,EAAEH;AAFgD,CAAtB,CAA9B;AAKP,OAAO,MAAMM,kBAAkB,GAAIC,YAAD,KAAmB;AACnDN,EAAAA,IAAI,EAAEH,WAAW,CAACU,qBADiC;AAEnDL,EAAAA,OAAO,EAAEI;AAF0C,CAAnB,CAA3B;AAKP,OAAO,MAAME,mBAAmB,GAAG,MAAM,MAAOC,QAAP,IAAoB;AAC3D,QAAMd,IAAI,CAACe,kBAAL,CAAwB,MAAOX,eAAP,IAA2B;AACvD,QAAIA,eAAJ,EAAqB;AACnB,YAAMY,OAAO,GAAG,MAAMf,yBAAyB,CAACG,eAAD,CAA/C;AACAY,MAAAA,OAAO,CAACC,UAAR,CAAoBC,QAAD,IAAc;AAC/B,cAAMd,eAAe,GAAG;AACtBe,UAAAA,EAAE,EAAED,QAAQ,CAACC,EADS;AAEtB,aAAGD,QAAQ,CAACE,IAAT;AAFmB,SAAxB;AAIAN,QAAAA,QAAQ,CAACN,qBAAqB,CAACJ,eAAD,CAAtB,CAAR;AACD,OAND;AAOD;;AACDU,IAAAA,QAAQ,CAACX,kBAAkB,CAACC,eAAD,CAAnB,CAAR;AACD,GAZK,CAAN;AAaD,CAdM","sourcesContent":["import { auth, createUserProfileDocument } from '../../api/firebase/firebase';\n\nimport * as actionTypes from './actionTypes';\n\n////////////////////\n\nexport const setCurrentUserNull = (userCredentials) => ({\n  type: actionTypes.SET_CURRENT_USER_NULL,\n  payload: userCredentials,\n});\n\nexport const setCurrentUserSuccess = (userCredentials) => ({\n  type: actionTypes.SET_CURRENT_USER_SUCCESS,\n  payload: userCredentials,\n});\n\nexport const setCurrentUserFail = (errorMessage) => ({\n  type: actionTypes.SET_CURRENT_USER_FAIL,\n  payload: errorMessage,\n});\n\nexport const setCurrentUserAsync = () => async (dispatch) => {\n  await auth.onAuthStateChanged(async (userCredentials) => {\n    if (userCredentials) {\n      const userRef = await createUserProfileDocument(userCredentials);\n      userRef.onSnapshot((snapShot) => {\n        const userCredentials = {\n          id: snapShot.id,\n          ...snapShot.data(),\n        };\n        dispatch(setCurrentUserSuccess(userCredentials));\n      });\n    }\n    dispatch(setCurrentUserNull(userCredentials));\n  });\n};\n"]},"metadata":{},"sourceType":"module"}